!function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);let i=0;class s{constructor(){this.id=++i,this._events={}}$on(t,e){let r=this;return Array.isArray(t)?t.forEach(t=>this.$on(t,e)):(Array.isArray(e)||(e=[e]),(r._events[t]||(r._events[t]=[])).push(...e)),r}$once(t,e){let r=this;function i(){r.$off(t,i),e.apply(r,arguments)}return i.fn=e,r.$on(t,i),r}$off(t,e){let r=this;if(!arguments.length)return r._events={},r;if(Array.isArray(t))return t.forEach(t=>this.$off(t,e)),r;const i=r._events[t];if(!i)return r;if(!e)return r._events[t]=null,r;if(e){let r,s=i.length;if(Array.isArray(e))return void e.forEach(e=>this.$off(t,e));for(;s--;)if((r=i[s])===e||r.fn===e){i.splice(s,1);break}}return r}$emit(t,...e){let r=this,i=r._events[t];return i&&i.forEach(t=>t.apply(r,e)),r}}let n=0;class o{constructor(){this.uid=++n,this.subs=[]}addSub(t){this.subs.push(t)}removeSub(t){const e=this.subs.indexOf(t);e>-1&&this.subs.splice(e,1)}notify(){this.subs.forEach(t=>{t.update()})}}o.target=null;const a=Array.prototype,l=Object.create(a);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){const e=a[t];Object.defineProperty(l,t,{value:function(...r){const i=e.apply(this,r),s=this.__ob__;let n;switch(t){case"push":case"unshift":n=r;break;case"splice":n=r.slice(2)}return n&&s.observeArray(n),s.dep.notify(),i},enumerable:!1,writable:!0,configurable:!0})}),l.$apply=function(){this.__ob__.observeArray(this),this.__ob__.dep.notify()};const c=Object.getOwnPropertyNames(l);function u(t,e,r){let i=new o,s=p(r);Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o.target&&(i.addSub(o.target),o.target.addDep(i),Array.isArray(r)&&(s.dep.addSub(o.target),o.target.addDep(s.dep))),r},set:function(t){t!==r&&(r=t,i.notify())}})}class f{constructor(t){if(this.value=t,Array.isArray(t)){this.dep=new o,("__proto__"in{}?h:d)(t,l,c),this.observeArray(t)}else this.walk(t);Object.defineProperty(t,"__ob__",{value:this,enumerable:!1,writable:!0,configurable:!0})}walk(t){const e=Object.keys(t);for(let r=0;r<e.length;r++)u(t,e[r],t[e[r]])}observeArray(t){for(let e=0,r=t.length;e<r;e++)p(t[e])}}function h(t,e,r){t.__proto__=e}function d(t,e,r){for(let i=0,s=r.length;i<s;i++){const s=r[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!0,configurable:!0})}}function p(t){if("object"!=typeof t)return;let e;return t.hasOwnProperty("__ob__")&&t.__ob__ instanceof f?e=t.__ob__:Object.isExtensible(t)&&(e=new f(t)),e}let b=0;class _{constructor(t,e,r,i){this.id=++b,this.obj=t,this.getter=e,this.cb=r,this.deps=[],this.value=this.get(),this.lazy=!!i&&!!i.lazy,this.dirty=this.lazy}get(){o.target=this;let t=this.getter.call(this.obj);return o.target=null,t}update(){if(this.lazy)return void(this.dirty=!0);const t=this.getter.call(this.obj),e=this.value;this.value=t,this.cb.call(this.obj,t,e)}evaluate(){this.value=this.getter.call(this.obj),this.dirty=!1}addDep(t){this.deps.push(t)}teardown(){let t=this.deps.length;for(;t--;)this.deps[t].removeSub(this);this.deps=[]}reset(){this.get()}}function y(){}let g=0;class m{constructor(t,e,r){this.uid=g++,this.key=e,this.option=r,this.ctx=t,this._init()}_init(){let t=new _(this.ctx,this.option.get||y,y,{lazy:!0});Object.defineProperty(this.ctx,this.key,{enumerable:!0,configurable:!0,set:this.option.set||y,get:()=>(t.dirty&&t.evaluate(),t.value)})}}function v(t,e,r){const i={enumerable:!0,configurable:!0,get(){},set(){}};i.get=function(){return this[e][r]},i.set=function(t){this[e][r]=t},Object.defineProperty(t,r,i)}let j=0;let O=new class extends s{constructor(t){super(),this._init(t)}_init(t){let e=this;if(e.uid=j++,t.methods)for(let r in t.methods)e[r]=t.methods[r].bind(e);e._data=t.data.call(e),p(e._data);for(let t in e._data)v(e,"_data",t);for(let r in t.watch)new _(e,()=>r.split(".").reduce((t,e)=>t[e],e),t.watch[r]);for(let r in t.computed)new m(e,r,t.computed[r])}}({data:()=>({firstName:"aco",lastName:"Yang"}),computed:{computedValue:{get(){return console.log("测试缓存"),this.firstName+" "+this.lastName}},computedSet:{get(){return this.firstName+" "+this.lastName},set(t){let e=t.split(" ");this.firstName=e[0],this.lastName=e[1]}}}});console.log("-------------"),console.log(O.computedValue),console.log(O.computedValue),O.firstName="acco",console.log(O.computedValue),O.computedSet="accco Yang",console.log(O.computedValue)}]);